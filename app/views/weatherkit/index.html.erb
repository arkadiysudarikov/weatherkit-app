<%= form_with url: "/", method: :get do |form| %>
  <%= form.label :address, "Address:" %>
  <%= form.search_field :address, placeholder: "Cupertino, CA", required: true, value: params[:address] %>
  <%= form.submit "Forecast" %>
<% end %>

<% if @mapkit %>

    Zip Code: <%= @mapkit["results"][0]["structuredAddress"]["postCode"].inspect %>

    Weather: <%= @weather["currentWeather"]["temperature"].inspect %>

    Cache Miss: <%= @cache_miss.inspect %>

    <table>
      <thead>
        <tr>
          <th colspan="2">Date Range</th>
          <th>Min</th>
          <th>Max</th>
        </tr>
      </thead>

      <tbody>
        <% @weather["forecastDaily"]["days"].each do |day| %>
          <tr>
            <td><%= day["forecastStart"].to_date %></td>
            <td><%= day["forecastEnd"].to_date %></td>
            <td><%= day["temperatureMin"].inspect %></td>
            <td><%= day["temperatureMax"].inspect %></td>
          </tr>
        <% end %>
      </tbody>
    </table

<% end %>

<aside data-v-0ca053f3="" aria-label="important" class="important"><p data-v-0ca053f3="" class="label">Important</p><p data-v-0ca053f3="">Using this API requires attribution. See <a href="https://developer.apple.com/weatherkit/data-source-attribution/" class="inline-link" data-v-0ca053f3="">WeatherKit - Data Sources</a> to learn more.</p></aside>
